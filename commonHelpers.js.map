{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// // Імпортуємо необхідний плагін\nimport axios from 'axios';\n\n\nexport async function searchFoto(userValue, page = 1, perPage = 15) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const PARAMS = new URLSearchParams({\n        key: \"42342437-5c4c341e915bce4954251eee0\",\n        q: userValue,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: perPage\n    });\n    const url = BASE_URL + END_POINT + \"?\" + PARAMS;\n\n    try {\n        const response = await axios.get(url);\n        if (!response.data.hits) {\n            throw new Error('Error fetching data: No hits');\n        }\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    }\n}\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderFoto(data) {\n    const gallery = document.querySelector('.js-container');\n    const fragment = document.createDocumentFragment();\n\n    data.hits.forEach(image => {\n        // Створюємо контейнер для карточки зображення\n        const card = document.createElement('li');\n        card.classList.add('image-card');\n\n        // Створюємо посилання\n        const link = document.createElement('a');\n        link.href = image.largeImageURL;\n\n        // Створюємо зображення\n        const imgElement = document.createElement('img');\n        imgElement.classList.add('pic-card');\n        imgElement.src = image.webformatURL;\n        imgElement.alt = image.tags;\n\n        // Додаємо зображення до посилання\n        link.appendChild(imgElement);\n\n        // Додаємо посилання з зображенням до карточки\n        card.appendChild(link);\n\n        // Створюємо елемент div для обгортки списку\n        const infoContainer = document.createElement('div');\n        infoContainer.classList.add('item-text');\n\n        // Створюємо список ul\n        const infoList = document.createElement('ul');\n        infoList.classList.add('image-info');\n\n        // Створюємо елементи списку li для інформації про зображення\n        const likesInfo = document.createElement('li');\n        likesInfo.textContent = `Likes: ${image.likes}`;\n\n        const viewsInfo = document.createElement('li');\n        viewsInfo.textContent = `Views: ${image.views}`;\n\n        const commentsInfo = document.createElement('li');\n        commentsInfo.textContent = `Comments: ${image.comments}`;\n\n        const downloadsInfo = document.createElement('li');\n        downloadsInfo.textContent = `Downloads: ${image.downloads}`;\n\n        // Додаємо елементи li до списку ul\n        infoList.appendChild(likesInfo);\n        infoList.appendChild(viewsInfo);\n        infoList.appendChild(commentsInfo);\n        infoList.appendChild(downloadsInfo);\n\n        // Додаємо список ul до елемента div\n        infoContainer.appendChild(infoList);\n\n        // Додаємо контейнер зі списком до карточки\n        card.appendChild(infoContainer);\n\n        // Додаємо карточку до фрагменту\n        fragment.appendChild(card);\n    });\n\n    // Додаємо фрагмент з карточками до галереї\n    gallery.appendChild(fragment);\n\n    // Ініціалізуємо SimpleLightbox для всіх зображень у галереї\n    const lightbox = new SimpleLightbox('.js-container .image-card a', {\n         captionsData: 'alt',\n         captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n\n// Функція для додавання додаткових зображень у галерею\nexport function renderMorePhotos(data) {\n    const gallery = document.querySelector('.js-container');\n    const fragment = document.createDocumentFragment();\n    \n    data.hits.forEach(image => {\n        // Створення DOM-елементів карточки тут\n        const card = document.createElement('li');\n        card.classList.add('image-card');\n        \n        // Створюємо посилання\n        const link = document.createElement('a');\n        link.href = image.largeImageURL;\n\n        // Створюємо зображення\n        const imgElement = document.createElement('img');\n        imgElement.classList.add('pic-card');\n        imgElement.src = image.webformatURL;\n        imgElement.alt = image.tags;\n\n        // Додаємо зображення до посилання\n        link.appendChild(imgElement);\n\n        // Додаємо посилання з зображенням до карточки\n        card.appendChild(link);\n\n        // Створюємо елемент div для обгортки списку\n        const infoContainer = document.createElement('div');\n        infoContainer.classList.add('item-text');\n\n        // Створюємо список ul\n        const infoList = document.createElement('ul');\n        infoList.classList.add('image-info');\n\n        // Створюємо елементи списку li для інформації про зображення\n        const likesInfo = document.createElement('li');\n        likesInfo.textContent = `Likes: ${image.likes}`;\n\n        const viewsInfo = document.createElement('li');\n        viewsInfo.textContent = `Views: ${image.views}`;\n\n        const commentsInfo = document.createElement('li');\n        commentsInfo.textContent = `Comments: ${image.comments}`;\n\n        const downloadsInfo = document.createElement('li');\n        downloadsInfo.textContent = `Downloads: ${image.downloads}`;\n\n        // Додаємо елементи li до списку ul\n        infoList.appendChild(likesInfo);\n        infoList.appendChild(viewsInfo);\n        infoList.appendChild(commentsInfo);\n        infoList.appendChild(downloadsInfo);\n\n        // Додаємо список ul до елемента div\n        infoContainer.appendChild(infoList);\n\n        // Додаємо контейнер зі списком до карточки\n        card.appendChild(infoContainer);\n\n        // Додаємо карточку до фрагменту\n        fragment.appendChild(card);\n    });\n\n    // Додаємо фрагмент з карточками до галереї\n    gallery.appendChild(fragment);\n\n    // Ініціалізуємо SimpleLightbox для всіх зображень у галереї\n    const lightbox = new SimpleLightbox('.js-container .image-card a', {\n         captionsData: 'alt',\n         captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n","import { searchFoto } from './js/pixabay-api.js';\nimport { renderFoto, renderMorePhotos } from './js/render-functions.js';\n\n// Імпортуємо необхідний плагін\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.js-container');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.getElementById('load-more-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\n// // Додаємо обробник події click для кнопки\n// form.addEventListener('submit', async function(event) {\n//     event.preventDefault();\n\n//     const query = document.getElementById('search-input').value.trim();\n//     if (!query) {\n//         iziToast.warning({\n//             title: 'Warning',\n//             message: 'Please enter a search images',\n//         });\n//         return;\n//     }\n\n//     // Показати завантажувач після кліку на кнопку\n//     loader.style.display = 'block';\n//     gallery.innerHTML = '';\n//     // Сховати кнопку \n//     loadMoreBtn.style.display = 'none';\n//     currentPage = 1;\n//     currentQuery = query;\n\n//     try {\n//         const data = await searchFoto(query, currentPage);\n//         if (data.hits.length === 0) {\n//             iziToast.error({\n//                 title: 'Error',\n//                 message: 'Sorry, there are no images matching your search query. Please try again!',\n//             });\n//         } else {\n//             totalHits = data.totalHits;\n//             renderFoto(data);\n//             if (data.hits.length >= 15) {\n//                 loadMoreBtn.style.display = 'block';\n//             }\n//         }\n//     } catch (error) {\n//         if (gallery.innerHTML === '') {\n//             iziToast.error({\n//                 title: 'Error',\n//                 message: 'An error occurred while searching for images',\n//             });\n//         }\n//     } finally {\n//         loader.style.display = 'none';\n//     }\n// });\n\n// loadMoreBtn.addEventListener('click', async function(event) {\n//     event.preventDefault();\n//     loader.style.display = 'block';\n\n//     try {\n//         currentPage++;\n//         const data = await searchFoto(currentQuery, currentPage);\n//         if (data.hits.length > 0) {\n//             const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n//             renderMorePhotos(data);\n//             window.scrollBy({\n//                 top: cardHeight * 2, // Прокручуємо на дві висоти карточки галереї\n//                 behavior: 'smooth' // Додаємо плавність\n//             });\n//         } \n//     } catch (error) {\n//         // Якщо немає більше зображень для завантаження\n//         loadMoreBtn.style.display = 'none';\n//         iziToast.warning({\n//             title: 'Warning',\n//             message: 'No more images to load',\n//         });\n//     } finally {\n//         if (gallery.querySelectorAll('.image-card').length >= totalHits) {\n//             loadMoreBtn.style.display = 'none';\n//             iziToast.info({\n//                 title: 'Info',\n//                 message: \"We're sorry, but you've reached the end of search results.\",\n//             });\n//         }\n//         loader.style.display = 'none';\n//     }\n// });\n\n// Додаємо обробник події click для кнопки\nform.addEventListener('submit', async function(event) {\n    event.preventDefault();\n\n    const query = document.getElementById('search-input').value.trim();\n    if (!query) {\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search images',\n        });\n        return;\n    }\n\n    // Показати завантажувач після кліку на кнопку\n    loader.style.display = 'block';\n    // Сховати кнопку \n    loadMoreBtn.style.display = 'none';\n    currentPage = 1;\n    currentQuery = query;\n\n    try {\n        const data = await searchFoto(query, currentPage);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        } else {\n            totalHits = data.totalHits;\n            renderFoto(data);\n            if (data.hits.length >= 15) {\n                loadMoreBtn.style.display = 'block';\n            }\n        }\n    } catch (error) {\n        if (gallery.innerHTML === '') {\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while searching for images',\n            });\n        }\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nloadMoreBtn.addEventListener('click', async function(event) {\n    event.preventDefault();\n    loader.style.display = 'block';\n\n    try {\n        currentPage++;\n        const data = await searchFoto(currentQuery, currentPage);\n        if (data.hits.length > 0) {\n            const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n            renderMorePhotos(data);\n            window.scrollBy({\n                top: cardHeight * 2, // Прокручуємо на дві висоти карточки галереї\n                behavior: 'smooth' // Додаємо плавність\n            });\n        } \n    } catch (error) {\n        // Якщо немає більше зображень для завантаження\n        loadMoreBtn.style.display = 'none';\n        iziToast.warning({\n            title: 'Warning',\n            message: 'No more images to load',\n        });\n    } finally {\n        if (gallery.querySelectorAll('.image-card').length >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n        loader.style.display = 'none';\n    }\n});\n\n\n"],"names":["searchFoto","userValue","page","perPage","BASE_URL","END_POINT","PARAMS","url","response","axios","error","renderFoto","data","gallery","fragment","image","card","link","imgElement","infoContainer","infoList","likesInfo","viewsInfo","commentsInfo","downloadsInfo","SimpleLightbox","renderMorePhotos","form","loader","loadMoreBtn","currentPage","currentQuery","totalHits","event","query","iziToast","cardHeight"],"mappings":"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"}